<h:html xmlns="http://www.w3.org/2002/xforms" 
    xmlns:h="http://www.w3.org/1999/xhtml" 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
    xmlns:jr="http://openrosa.org/javarosa"
    xmlns:odk="http://www.opendatakit.org/xforms">
    <h:head>
        <h:title>Setlocation in repeat</h:title>
        <model>
            <instance>
                <data id="data-id">
                    <repeat>
                        <address/>
                        <address_location/>
                        <note/>
                    </repeat>
                    <meta>
                        <instanceID />
                    </meta>
                </data>
            </instance>
            <bind nodeset="/data/repeat/address" type="string" />
            <bind nodeset="/data/repeat/address_location" type="geopoint" />
            <bind nodeset="/data/repeat/note" type="string" readonly="true()" />

            <bind jr:preload="uid" nodeset="/data/meta/instanceID" readonly="true()" type="string"/>
        </model>
    </h:head>
    <h:body>
        <group nodeset="/data/repeat">
            <label>House</label>
            <repeat nodeset="/data/repeat">
                
                <input ref="/data/repeat/address">
                    <label>Enter address of the house you're in front of.</label>
                    <odk:setgeopoint event="xforms-value-changed" ref="/data/repeat/address_location" />
                </input>

                <input ref="/data/repeat/note">
                    <label>Walk to the next house. When in front of it, add a new house record.</label>
                </input>
            </repeat>
        </group>
    </h:body>
</h:html>
